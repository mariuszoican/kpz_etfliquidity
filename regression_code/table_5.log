
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      18.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: 5-user 32-core network perpetual
Serial number: 501806221992
  Licensed to: Nathaniel Baum−Snow
               University of Toronto

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.

. do table_5 

. 
. // Table 5 - Shapley values
. // -------------------------------------
. 
. // Load data
. // -------------------------------------
. clear all

. set more off

. 
. cd ..
/global/home/pc_mzoican/kpz_etfliquidity

. local directory : pwd

. display "`working_dir'"


. import delimited "`directory'/data/etf_panel_processed.csv"
(encoding automatically selected: ISO-8859-1)
(71 vars, 1,752 obs)

. 
. 
. egen time_existence_std=std(time_existence)

. egen time_since_first_std=std(time_since_first)
(56 missing values generated)

. egen log_aum_index_std=std(log_aum_index)

. egen lend_byaum_bps_std=std(lend_byaum_bps)

. egen marketing_fee_bps_std=std(marketing_fee_bps)

. egen tr_error_bps_std=std(tr_error_bps)

. egen perf_drag_bps_std=std(perf_drag_bps)

. egen turnover_frac_std=std(turnover_frac)
(2 missing values generated)

. gen  net_expense_mer=other_expense-marketing_fee_bps/100+fee_waiver

. egen net_expenses_std=std(net_expense_mer)

. egen stock_tweets_std=std(stock_tweets)

. egen ratio_tii_std=std(ratio_tii)
(73 missing values generated)

. egen log_volume_std=std(log_volume)

. egen spread_bps_crsp_std=std(spread_bps_crsp)

. egen other_expense_std=std(other_expenses)

. egen fee_waiver_std=std(fee_waivers)

. egen creation_fee_std=std(creation_fee)

. 
. label variable mgr_duration "Investor holding duration"

. label variable highfee "High MER"

. label variable time_existence_std "ETF age (quarters)"

. label variable time_since_first_std "Time since first position"

. label variable log_aum_index_std "Log index AUM"

. label variable d_uit "Unit investment trust"

. label variable lend_byaum_bps_std "Lending income (bps of AUM)"

. label variable marketing_fee_bps_std "Marketing expense (bps)"

. label variable stock_tweets "Name recognition (Twitter msg.)"

. label variable tr_error_bps_std "Tracking error (bps)"

. label variable perf_drag_bps_std "Performance drag (bps)"

. label variable turnover_frac_std "ETF turnover"

. label variable net_expenses_std "Other net expenses"

. label variable stock_tweets_std "Stock tweets"

. label variable log_volume_std "Log volume"

. label variable spread_bps_crsp_std "Relative spread"

. label variable creation_fee_std "Creation fee"

. 
. 
. 
. 
. 
. //
. gen tii_return=ratio_tii * logret_q_lag
(73 missing values generated)

. 
. encode index_id, gen(index_no)

. 
. // keep if marketing_fee_bps>0
. 
. quietly regress mer_bps i.index_no i.quarter

. predict mer_bps_fe, residuals

. 
. quietly regress mkt_share i.index_no i.quarter

. predict mkt_share_fe, residuals

. 
. 
. 
. drop log_aum

. gen log_aum=log(aum)
(2 missing values generated)

. 
. // quietly regress log_aum i.index_no i.quarter
. // predict mkt_share_fe, residuals
. 
. label variable mkt_share_fe "Market share"

. label variable mer_bps_fe "MER"

. 
. rego mkt_share_fe   spread_bps_crsp_std \ stock_tweets marketing_fee_bps_std 
> other_expense_std fee_waiver_std  \ ratio_tii_std \ lend_byaum_bps_std  tr_er
> ror_bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1 spread_bps_crs~d |   -.1187516 ***  .0315298   0.001    -0.3486     59.5320
 2     stock_tweets |    .0144079 ***  .0040779   0.002     0.0490     19.9273
   marketing_fee_~d |   -.0390165 ***  .0082644   0.000    -0.1136           
   other_expense_~d |    .0285342 ***  .0055862   0.000     0.0850           
     fee_waiver_std |    .0165731 **   .0060602   0.013     0.0495           
 3    ratio_tii_std |    .0237433 **   .0085909   0.012     0.0704      2.1544
 4 lend_byaum_bps~d |    .0399642 ***  .0026745   0.000     0.1187     18.3863
   tr_error_bps_std |    .0439234 ***  .0113584   0.001     0.1305           
   perf_drag_bps_~d |   -.0103437      .0063645   0.121    -0.0308           
              d_uit |   -.1757281 ***  .0261437   0.000    -0.0795           
 -        Intercept |    .0065293      .0052779   0.231     
--------------------+---------------------------------------------------------
       Observations |        1679
         Overall R2 |     0.18954
           Root MSE |    .3043502
      F-stat. Model |    106.7644 ***             0.000
     Log Likelihood |   -379.5813
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 replace tex tstat label
>   dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mkt_share_fe    turnover_frac_std  \ stock_tweets marketing_fee_bps_std 
> other_expense_std fee_waiver_std  \ ratio_tii_std \ lend_byaum_bps_std  tr_er
> ror_bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1 turnover_frac_~d |    .1137111 ***  .0168354   0.000     0.3359     49.9202
 2     stock_tweets |   -.0072241 *     .003654   0.063    -0.0246     31.3678
   marketing_fee_~d |   -.0643395 ***  .0071895   0.000    -0.1876           
   other_expense_~d |    .0157877 **   .0075379   0.050     0.0471           
     fee_waiver_std |    .0260713 ***  .0062638   0.001     0.0780           
 3    ratio_tii_std |   -.0020701      .0072128   0.777    -0.0061      0.4768
 4 lend_byaum_bps~d |    .0495837 ***  .0026949   0.000     0.1471     18.2352
   tr_error_bps_std |   -.0137261      .0090159   0.144    -0.0408           
   perf_drag_bps_~d |    .0063467      .0060616   0.308     0.0188           
              d_uit |   -.1838857 ***  .0253357   0.000    -0.0833           
 -        Intercept |    .0091797 *    .0048165   0.072     
--------------------+---------------------------------------------------------
       Observations |        1677
         Overall R2 |     0.16774
           Root MSE |    .3081882
      F-stat. Model |    819.1993 ***             0.000
     Log Likelihood |   -400.1382
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mkt_share_fe    log_volume_std  \ stock_tweets marketing_fee_bps_std oth
> er_expense_std fee_waiver_std  \ ratio_tii_std \ lend_byaum_bps_std  tr_error
> _bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1   log_volume_std |    .2167899 ***  .0062679   0.000     0.6328     82.9875
 2     stock_tweets |   -.0078705 ***  .0014796   0.000    -0.0268      8.3868
   marketing_fee_~d |   -.0137722 **   .0061831   0.038    -0.0401           
   other_expense_~d |    .0003839      .0025468   0.882     0.0011           
     fee_waiver_std |   -.0113003 ***  .0030719   0.002    -0.0338           
 3    ratio_tii_std |    .0108619      .0064421   0.108     0.0322      0.3784
 4 lend_byaum_bps~d |    .0368538 ***  .0031104   0.000     0.1094      8.2473
   tr_error_bps_std |     .005182      .0079476   0.522     0.0154           
   perf_drag_bps_~d |    .0040155      .0076102   0.604     0.0120           
              d_uit |   -.3713268 ***  .0063495   0.000    -0.1681           
 -        Intercept |    .0115497 *    .0062321   0.079     
--------------------+---------------------------------------------------------
       Observations |        1679
         Overall R2 |     0.40257
           Root MSE |    .2613065
      F-stat. Model |    1912.551 ***             0.000
     Log Likelihood |   -123.5591
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mer_bps_fe    spread_bps_crsp_std \ stock_tweets marketing_fee_bps_std o
> ther_expense_std fee_waiver_std  \ ratio_tii_std \ lend_byaum_bps_std  tr_err
> or_bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1 spread_bps_crs~d |   -2.690933 ***  .5054105   0.000    -0.2800     27.6188
 2     stock_tweets |   -.2313726 ***  .0651802   0.002    -0.0279     27.0689
   marketing_fee_~d |   -1.414456 ***  .1747598   0.000    -0.1460           
   other_expense_~d |    1.253049 ***  .0851165   0.000     0.1324           
     fee_waiver_std |    1.686871 ***  .0796326   0.000     0.1788           
 3    ratio_tii_std |    .9867454 ***  .1989208   0.000     0.1038      3.7561
 4 lend_byaum_bps~d |    .3466889 ***  .1017686   0.003     0.0365     41.5562
   tr_error_bps_std |    3.769489 ***  .4760812   0.000     0.3969           
   perf_drag_bps_~d |    1.071732 **   .3770685   0.010     0.1131           
              d_uit |    4.852809 ***  .2714288   0.000     0.0779           
 -        Intercept |   -.0433391      .1344677   0.751     
--------------------+---------------------------------------------------------
       Observations |        1679
         Overall R2 |     0.27032
           Root MSE |    8.146788
      F-stat. Model |    756.7083 ***             0.000
     Log Likelihood |    -5898.79
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mer_bps_fe    turnover_frac_std  \ stock_tweets marketing_fee_bps_std ot
> her_expense_std fee_waiver_std \ ratio_tii_std \ lend_byaum_bps_std  tr_error
> _bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1 turnover_frac_~d |    1.864434 ***  .2078981   0.000     0.1952     23.3962
 2     stock_tweets |   -.5591474 ***  .1236997   0.000    -0.0675     40.6820
   marketing_fee_~d |   -2.046256 ***  .2351222   0.000    -0.2115           
   other_expense_~d |    1.217956 ***  .1244736   0.000     0.1288           
     fee_waiver_std |    1.963541 ***  .0720658   0.000     0.2083           
 3    ratio_tii_std |    .4726507 **   .1882613   0.021     0.0497      2.1884
 4 lend_byaum_bps~d |     .521736 ***  .0806582   0.000     0.0549     33.7334
   tr_error_bps_std |    2.678651 ***  .2946949   0.000     0.2822           
   perf_drag_bps_~d |    1.332306 ***  .4404749   0.007     0.1400           
              d_uit |    4.649561 ***    .34141   0.000     0.0747           
 -        Intercept |   -.0115137      .2442641   0.963     
--------------------+---------------------------------------------------------
       Observations |        1677
         Overall R2 |     0.23115
           Root MSE |     8.35885
      F-stat. Model |    334.1348 ***             0.000
     Log Likelihood |   -5934.851
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mer_bps_fe    log_volume_std  \ stock_tweets marketing_fee_bps_std other
> _expense_std fee_waiver_std \ ratio_tii_std \ lend_byaum_bps_std  tr_error_bp
> s_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1   log_volume_std |    1.794468 ***  .2092254   0.000     0.1857     24.7843
 2     stock_tweets |   -.3462157 ***  .0951747   0.002    -0.0418     32.7303
   marketing_fee_~d |   -1.700639 ***  .1704381   0.000    -0.1756           
   other_expense_~d |    1.422359 ***  .0851049   0.000     0.1503           
     fee_waiver_std |    1.747221 ***  .0855639   0.000     0.1851           
 3    ratio_tii_std |    .6366545 ***  .1924662   0.004     0.0670      2.8246
 4 lend_byaum_bps~d |    .4176035 ***  .1050682   0.001     0.0440     39.6608
   tr_error_bps_std |    3.228017 ***   .402561   0.000     0.3399           
   perf_drag_bps_~d |    1.326248 ***  .4413939   0.007     0.1399           
              d_uit |    3.066224 ***  .4003595   0.000     0.0492           
 -        Intercept |    .0093247      .2329307   0.968     
--------------------+---------------------------------------------------------
       Observations |        1679
         Overall R2 |     0.23377
           Root MSE |    8.348312
      F-stat. Model |    416.6385 ***             0.000
     Log Likelihood |   -5939.817
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
end of do-file
