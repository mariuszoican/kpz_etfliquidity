
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      18.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: 5-user 32-core network perpetual
Serial number: 501806221992
  Licensed to: Nathaniel Baum−Snow
               University of Toronto

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.

. do table_5 

. 
. // Table 5 - Shapley values
. // -------------------------------------
. 
. // Load data
. // -------------------------------------
. clear all

. set more off

. 
. cd ..
/global/home/pc_mzoican/kpz_etfliquidity

. local directory : pwd

. display "`working_dir'"


. import delimited "`directory'/data/etf_panel_processed.csv"
(encoding automatically selected: ISO-8859-1)
(71 vars, 1,752 obs)

. 
. 
. egen time_existence_std=std(time_existence)

. egen time_since_first_std=std(time_since_first)
(33 missing values generated)

. egen log_aum_index_std=std(log_aum_index)

. egen lend_byaum_bps_std=std(lend_byaum_bps)

. egen marketing_fee_bps_std=std(marketing_fee_bps)

. egen tr_error_bps_std=std(tr_error_bps)

. egen perf_drag_bps_std=std(perf_drag_bps)

. egen turnover_frac_std=std(turnover_frac)
(2 missing values generated)

. gen  net_expense_mer=other_expense-marketing_fee_bps/100+fee_waiver

. egen net_expenses_std=std(net_expense_mer)

. egen stock_tweets_std=std(stock_tweets)

. egen ratio_tii_std=std(ratio_tii)
(49 missing values generated)

. egen log_volume_std=std(log_volume)

. egen spread_bps_crsp_std=std(spread_bps_crsp)

. egen other_expense_std=std(other_expenses)

. egen fee_waiver_std=std(fee_waivers)

. egen creation_fee_std=std(creation_fee)

. 
. label variable mgr_duration "Investor holding duration"

. label variable highfee "High MER"

. label variable time_existence_std "ETF age (quarters)"

. label variable time_since_first_std "Time since first position"

. label variable log_aum_index_std "Log index AUM"

. label variable d_uit "Unit investment trust"

. label variable lend_byaum_bps_std "Lending income (bps of AUM)"

. label variable marketing_fee_bps_std "Marketing expense (bps)"

. label variable stock_tweets "Name recognition (Twitter msg.)"

. label variable tr_error_bps_std "Tracking error (bps)"

. label variable perf_drag_bps_std "Performance drag (bps)"

. label variable turnover_frac_std "ETF turnover"

. label variable net_expenses_std "Other net expenses"

. label variable stock_tweets_std "Stock tweets"

. label variable log_volume_std "Log volume"

. label variable spread_bps_crsp_std "Relative spread"

. label variable creation_fee_std "Creation fee"

. 
. 
. 
. 
. 
. //
. gen tii_return=ratio_tii * logret_q_lag
(49 missing values generated)

. 
. encode index_id, gen(index_no)

. 
. // keep if marketing_fee_bps>0
. 
. quietly regress mer_bps i.index_no i.quarter

. predict mer_bps_fe, residuals

. 
. quietly regress mkt_share i.index_no i.quarter

. predict mkt_share_fe, residuals

. 
. 
. 
. drop log_aum

. gen log_aum=log(aum)
(2 missing values generated)

. 
. // quietly regress log_aum i.index_no i.quarter
. // predict mkt_share_fe, residuals
. 
. label variable mkt_share_fe "Market share"

. label variable mer_bps_fe "MER"

. 
. rego mkt_share_fe   spread_bps_crsp_std \ stock_tweets marketing_fee_bps_std 
> other_expense_std fee_waiver_std  \ ratio_tii_std \ lend_byaum_bps_std  tr_er
> ror_bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1 spread_bps_crs~d |   -.1162617 ***   .029751   0.001    -0.3441     57.9760
 2     stock_tweets |    .0146457 ***  .0042328   0.003     0.0495     21.8847
   marketing_fee_~d |    -.041786 ***  .0075243   0.000    -0.1239           
   other_expense_~d |    .0307871 ***  .0054072   0.000     0.0919           
     fee_waiver_std |    .0178521 ***  .0059792   0.008     0.0531           
 3    ratio_tii_std |     .024059 ***  .0082561   0.009     0.0715      2.4937
 4 lend_byaum_bps~d |    .0394601 ***  .0027153   0.000     0.1162     17.6456
   tr_error_bps_std |    .0436581 ***   .011218   0.001     0.1291           
   perf_drag_bps_~d |   -.0101068      .0062076   0.120    -0.0299           
              d_uit |    -.179886 ***  .0270835   0.000    -0.0809           
 -        Intercept |    .0069177      .0051603   0.196     
--------------------+---------------------------------------------------------
       Observations |        1703
         Overall R2 |     0.19411
           Root MSE |     .303106
      F-stat. Model |    132.8525 ***             0.000
     Log Likelihood |   -378.1098
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 replace tex tstat label
>   dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mkt_share_fe    turnover_frac_std  \ stock_tweets marketing_fee_bps_std 
> other_expense_std fee_waiver_std  \ ratio_tii_std \ lend_byaum_bps_std  tr_er
> ror_bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1 turnover_frac_~d |     .110152 ***  .0159012   0.000     0.3293     48.1239
 2     stock_tweets |   -.0065174 *    .0037231   0.096    -0.0221     33.7316
   marketing_fee_~d |   -.0668162 ***  .0064523   0.000    -0.1984           
   other_expense_~d |    .0169308 **   .0073097   0.032     0.0506           
     fee_waiver_std |     .026263 ***  .0064174   0.001     0.0783           
 3    ratio_tii_std |   -.0007748      .0075235   0.919    -0.0023      0.7809
 4 lend_byaum_bps~d |    .0487985 ***  .0027568   0.000     0.1436     17.3637
   tr_error_bps_std |   -.0123752      .0084075   0.157    -0.0366           
   perf_drag_bps_~d |     .006407      .0060176   0.300     0.0189           
              d_uit |   -.1834368 ***  .0244877   0.000    -0.0827           
 -        Intercept |    .0082163      .0047743   0.102     
--------------------+---------------------------------------------------------
       Observations |        1701
         Overall R2 |     0.17144
           Root MSE |    .3071154
      F-stat. Model |    1170.051 ***             0.000
     Log Likelihood |   -400.0119
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mkt_share_fe    log_volume_std  \ stock_tweets marketing_fee_bps_std oth
> er_expense_std fee_waiver_std  \ ratio_tii_std \ lend_byaum_bps_std  tr_error
> _bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1   log_volume_std |    .2149404 ***  .0065971   0.000     0.6302     82.1946
 2     stock_tweets |   -.0076956 ***  .0014172   0.000    -0.0260      9.2329
   marketing_fee_~d |    -.017159 ***  .0055639   0.006    -0.0509           
   other_expense_~d |    .0003447       .002322   0.884     0.0010           
     fee_waiver_std |   -.0119266 ***  .0031768   0.001    -0.0355           
 3    ratio_tii_std |    .0114932 *    .0065302   0.094     0.0341      0.5366
 4 lend_byaum_bps~d |    .0361642 ***  .0031445   0.000     0.1065      8.0360
   tr_error_bps_std |     .005503      .0075869   0.477     0.0163           
   perf_drag_bps_~d |     .004411      .0074914   0.563     0.0131           
              d_uit |   -.3698668 ***  .0065943   0.000    -0.1664           
 -        Intercept |    .0111782 *    .0060438   0.080     
--------------------+---------------------------------------------------------
       Observations |        1703
         Overall R2 |     0.40503
           Root MSE |    .2604372
      F-stat. Model |    1930.846 ***             0.000
     Log Likelihood |   -119.7294
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mer_bps_fe    spread_bps_crsp_std \ stock_tweets marketing_fee_bps_std o
> ther_expense_std fee_waiver_std  \ ratio_tii_std \ lend_byaum_bps_std  tr_err
> or_bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1 spread_bps_crs~d |   -2.703369 ***  .4978099   0.000    -0.2832     28.0150
 2     stock_tweets |    -.237393 ***  .0662157   0.002    -0.0284     27.6423
   marketing_fee_~d |   -1.430856 ***   .166835   0.000    -0.1502           
   other_expense_~d |    1.239181 ***  .0843232   0.000     0.1309           
     fee_waiver_std |    1.690951 ***  .0789651   0.000     0.1782           
 3    ratio_tii_std |    1.035139 ***  .2005087   0.000     0.1089      4.3858
 4 lend_byaum_bps~d |    .3176981 ***  .0922629   0.003     0.0331     39.9570
   tr_error_bps_std |    3.763538 ***  .4755501   0.000     0.3940           
   perf_drag_bps_~d |    1.069435 ***  .3728031   0.010     0.1121           
              d_uit |    4.891325 ***   .272406   0.000     0.0779           
 -        Intercept |   -.0569989      .1222469   0.646     
--------------------+---------------------------------------------------------
       Observations |        1703
         Overall R2 |     0.27700
           Root MSE |     8.10976
      F-stat. Model |    598.5975 ***             0.000
     Log Likelihood |    -5975.43
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mer_bps_fe    turnover_frac_std  \ stock_tweets marketing_fee_bps_std ot
> her_expense_std fee_waiver_std \ ratio_tii_std \ lend_byaum_bps_std  tr_error
> _bps_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1 turnover_frac_~d |    1.767957 ***   .187493   0.000     0.1871     22.2162
 2     stock_tweets |   -.5475468 ***  .1196073   0.000    -0.0656     41.8609
   marketing_fee_~d |   -2.074052 ***  .2350738   0.000    -0.2180           
   other_expense_~d |    1.215935 ***  .1189059   0.000     0.1286           
     fee_waiver_std |    1.967161 ***  .0685483   0.000     0.2075           
 3    ratio_tii_std |    .5460218 **   .2198052   0.022     0.0574      2.8993
 4 lend_byaum_bps~d |    .4918083 ***   .072097   0.000     0.0512     33.0236
   tr_error_bps_std |    2.703386 ***  .3063431   0.000     0.2832           
   perf_drag_bps_~d |    1.329402 ***   .436751   0.007     0.1387           
              d_uit |    4.760471 ***  .3581175   0.000     0.0759           
 -        Intercept |   -.0473822      .2292093   0.838     
--------------------+---------------------------------------------------------
       Observations |        1701
         Overall R2 |     0.23407
           Root MSE |    8.343334
      F-stat. Model |    263.1123 ***             0.000
     Log Likelihood |   -6016.705
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
. rego mer_bps_fe    log_volume_std  \ stock_tweets marketing_fee_bps_std other
> _expense_std fee_waiver_std \ ratio_tii_std \ lend_byaum_bps_std  tr_error_bp
> s_std perf_drag_bps_std d_uit, vce(cl quarter)
 
------------------------------------------------------------------------------
Gr        Regressor |       Coef.      Std.Err.   P>|t|  Std.Coef.   Group %R2
--------------------+---------------------------------------------------------
 1   log_volume_std |    1.788038 ***  .2221658   0.000     0.1856     24.6632
 2     stock_tweets |   -.3549136 ***  .0989169   0.002    -0.0425     33.5586
   marketing_fee_~d |   -1.725043 ***  .1670234   0.000    -0.1811           
   other_expense_~d |    1.402404 ***  .0835436   0.000     0.1482           
     fee_waiver_std |    1.748244 ***  .0878283   0.000     0.1842           
 3    ratio_tii_std |    .7108455 ***  .2141229   0.004     0.0748      3.5776
 4 lend_byaum_bps~d |    .3923084 ***  .0953892   0.001     0.0409     38.2006
   tr_error_bps_std |    3.214775 ***  .3980352   0.000     0.3365           
   perf_drag_bps_~d |    1.328478 ***  .4356384   0.007     0.1392           
              d_uit |    3.148965 ***   .414377   0.000     0.0502           
 -        Intercept |   -.0108198      .2201738   0.961     
--------------------+---------------------------------------------------------
       Observations |        1703
         Overall R2 |     0.23858
           Root MSE |    8.322462
      F-stat. Model |    391.8088 ***             0.000
     Log Likelihood |    -6019.52
------------------------------------------------------------------------------

. outreg2 using "`directory'/output/table_5.tex", adjr2 append tex tstat label 
>  dec(2) tdec(2) eqdrop(/) keep(*)
/global/home/pc_mzoican/kpz_etfliquidity/output/table_5.tex
dir : seeout

. 
end of do-file
